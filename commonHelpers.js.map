{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nlet userSelectedDate;\nlet intervalId = null;\n\nconst clockFields = {\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\n\nconst myInputDate = document.querySelector('#datetime-picker');\nconst fp = flatpickr(myInputDate, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    console.log(selectedDates[0]);\n    let startBtn = document.querySelector('[data-start]');\n    if (selectedDates[0].getTime() <= new Date().getTime()) {\n      startBtn.disabled = true;\n      iziToast.show({\n        backgroundColor: 'rgba(239, 64, 64, 1)',\n        title: 'Error',\n        titleColor: 'rgba(255, 255, 255, 1)',\n        message: 'Please choose a date in the future',\n        messageColor: 'rgba(255, 255, 255, 1)',\n        position: 'topCenter',\n      });\n    } else {\n      startBtn.disabled = false;\n      startBtn.addEventListener('click', () => {\n        startBtn.disabled = true;\n        myInputDate.disabled = true;\n        intervalId = setInterval(() => {\n          const currentTime = Date.now();\n          const diff = selectedDates[0] - currentTime;\n\n          if (diff < 1000) {\n            clearInterval(intervalId);\n            startBtn.disabled = false;\n            myInputDate.disabled = false;\n          }\n          const { days, hours, minutes, seconds } = convertMs(diff);\n          updateClock(days, hours, minutes, seconds);\n        }, 1000);\n      });\n    }\n  },\n});\nconst updateClock = (days, hours, minutes, seconds) => {\n  clockFields.days.textContent = addLeadingZero(days);\n  clockFields.hours.textContent = addLeadingZero(hours);\n  clockFields.minutes.textContent = addLeadingZero(minutes);\n  clockFields.seconds.textContent = addLeadingZero(seconds);\n};\n\nconst addLeadingZero = value => {\n  return String(value).padStart(2, '0');\n};\n\nconst convertMs = milliseconds => {\n  const seconds = Math.floor((milliseconds / 1000) % 60);\n  const minutes = Math.floor((milliseconds / 1000 / 60) % 60);\n  const hours = Math.floor((milliseconds / 1000 / 60 / 60) % 24);\n  const days = Math.floor(milliseconds / (1000 * 60 * 60 * 24));\n  return { days, hours, minutes, seconds };\n};\n"],"names":["intervalId","clockFields","myInputDate","flatpickr","selectedDates","startBtn","iziToast","currentTime","diff","days","hours","minutes","seconds","convertMs","updateClock","addLeadingZero","value","milliseconds"],"mappings":"+IAKA,IAAIA,EAAa,KAEjB,MAAMC,EAAc,CAClB,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EAEMC,EAAc,SAAS,cAAc,kBAAkB,EAClDC,EAAUD,EAAa,CAChC,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQE,EAAe,CACFA,EAAc,CAAC,EAClC,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5B,IAAIC,EAAW,SAAS,cAAc,cAAc,EAChDD,EAAc,CAAC,EAAE,QAAS,GAAI,IAAI,KAAI,EAAG,WAC3CC,EAAS,SAAW,GACpBC,EAAS,KAAK,CACZ,gBAAiB,uBACjB,MAAO,QACP,WAAY,yBACZ,QAAS,qCACT,aAAc,yBACd,SAAU,WAClB,CAAO,IAEDD,EAAS,SAAW,GACpBA,EAAS,iBAAiB,QAAS,IAAM,CACvCA,EAAS,SAAW,GACpBH,EAAY,SAAW,GACvBF,EAAa,YAAY,IAAM,CAC7B,MAAMO,EAAc,KAAK,MACnBC,EAAOJ,EAAc,CAAC,EAAIG,EAE5BC,EAAO,MACT,cAAcR,CAAU,EACxBK,EAAS,SAAW,GACpBH,EAAY,SAAW,IAEzB,KAAM,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAI,EACxDM,EAAYL,EAAMC,EAAOC,EAASC,CAAO,CAC1C,EAAE,GAAI,CACf,CAAO,EAEJ,CACH,CAAC,EACD,MAAME,EAAc,CAACL,EAAMC,EAAOC,EAASC,IAAY,CACrDX,EAAY,KAAK,YAAcc,EAAeN,CAAI,EAClDR,EAAY,MAAM,YAAcc,EAAeL,CAAK,EACpDT,EAAY,QAAQ,YAAcc,EAAeJ,CAAO,EACxDV,EAAY,QAAQ,YAAcc,EAAeH,CAAO,CAC1D,EAEMG,EAAiBC,GACd,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAGhCH,EAAYI,GAAgB,CAChC,MAAML,EAAU,KAAK,MAAOK,EAAe,IAAQ,EAAE,EAC/CN,EAAU,KAAK,MAAOM,EAAe,IAAO,GAAM,EAAE,EACpDP,EAAQ,KAAK,MAAOO,EAAe,IAAO,GAAK,GAAM,EAAE,EAE7D,MAAO,CAAE,KADI,KAAK,MAAMA,GAAgB,IAAO,GAAK,GAAK,GAAG,EAC7C,MAAAP,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}